"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n// Define the paths that should be protected\nconst protectedPaths = [\n    \"/dashboard\",\n    \"/dashboards\",\n    \"/dashboards/*\",\n    \"/catalog\",\n    \"/catalog/*\",\n    \"/settings\",\n    \"/catalog/raw-material\",\n    \"/catalog/raw-material/*\",\n    \"/settings/*\",\n    \"/replenishment\",\n    \"/replenishment/*\",\n    \"/sales\",\n    \"/sales/*\",\n    \"/inventory\",\n    \"/inventory/*\",\n    \"/reports\",\n    \"/reports/*\"\n];\n// Define the paths that should be public\nconst publicPaths = [\n    \"/auth/login\",\n    \"/auth/signup\",\n    \"/auth/forgot-password\"\n];\nfunction middleware(request) {\n    const { pathname } = request.nextUrl;\n    const token = request.cookies.get(\"accessToken\")?.value;\n    console.log(\"MIDDLEWARE:\", {\n        pathname,\n        token\n    });\n    // Check if the path should be protected\n    const isProtectedPath = protectedPaths.some((path)=>pathname.startsWith(path));\n    const isPublicPath = publicPaths.some((path)=>pathname.startsWith(path));\n    // If it's a protected path and there's no token, redirect to login\n    if (isProtectedPath && !token) {\n        const loginUrl = new URL(\"/auth/login\", request.url);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(loginUrl);\n    }\n    // If user is logged in and tries to access auth pages, redirect to dashboard\n    if (isPublicPath && token) {\n        const dashboardUrl = new URL(\"/dashboards/main\", request.url);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(dashboardUrl);\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n// Configure which paths the middleware should run on\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - assets (public assets)\n     */ \"/((?!api|_next/static|_next/image|favicon.ico|assets).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFHMUMsNENBQTRDO0FBQzVDLE1BQU1DLGlCQUFpQjtJQUNyQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBR0Q7QUFFRCx5Q0FBeUM7QUFDekMsTUFBTUMsY0FBYztJQUNsQjtJQUNBO0lBQ0E7Q0FDRDtBQUVNLFNBQVNDLFdBQVdDLE9BQW9CO0lBQzdDLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdELFFBQVFFLE9BQU87SUFDcEMsTUFBTUMsUUFBUUgsUUFBUUksT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCQztJQUVsREMsUUFBUUMsR0FBRyxDQUFDLGVBQWU7UUFBRVA7UUFBVUU7SUFBTTtJQUU3Qyx3Q0FBd0M7SUFDeEMsTUFBTU0sa0JBQWtCWixlQUFlYSxJQUFJLENBQUNDLENBQUFBLE9BQVFWLFNBQVNXLFVBQVUsQ0FBQ0Q7SUFDeEUsTUFBTUUsZUFBZWYsWUFBWVksSUFBSSxDQUFDQyxDQUFBQSxPQUFRVixTQUFTVyxVQUFVLENBQUNEO0lBRWxFLG1FQUFtRTtJQUNuRSxJQUFJRixtQkFBbUIsQ0FBQ04sT0FBTztRQUM3QixNQUFNVyxXQUFXLElBQUlDLElBQUksZUFBZWYsUUFBUWdCLEdBQUc7UUFDbkQsT0FBT3BCLHFEQUFZQSxDQUFDcUIsUUFBUSxDQUFDSDtJQUMvQjtJQUVBLDZFQUE2RTtJQUM3RSxJQUFJRCxnQkFBZ0JWLE9BQU87UUFDekIsTUFBTWUsZUFBZSxJQUFJSCxJQUFJLG9CQUFvQmYsUUFBUWdCLEdBQUc7UUFDNUQsT0FBT3BCLHFEQUFZQSxDQUFDcUIsUUFBUSxDQUFDQztJQUMvQjtJQUdBLE9BQU90QixxREFBWUEsQ0FBQ3VCLElBQUk7QUFDMUI7QUFFQSxxREFBcUQ7QUFDOUMsTUFBTUMsU0FBUztJQUNwQkMsU0FBUztRQUNQOzs7Ozs7O0tBT0MsR0FDRDtLQUNEO0FBQ0gsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbi8vIERlZmluZSB0aGUgcGF0aHMgdGhhdCBzaG91bGQgYmUgcHJvdGVjdGVkXG5jb25zdCBwcm90ZWN0ZWRQYXRocyA9IFtcbiAgJy9kYXNoYm9hcmQnLFxuICAnL2Rhc2hib2FyZHMnLFxuICAnL2Rhc2hib2FyZHMvKicsXG4gICcvY2F0YWxvZycsXG4gICcvY2F0YWxvZy8qJyxcbiAgJy9zZXR0aW5ncycsXG4gICcvY2F0YWxvZy9yYXctbWF0ZXJpYWwnLFxuICAnL2NhdGFsb2cvcmF3LW1hdGVyaWFsLyonLFxuICAnL3NldHRpbmdzLyonLFxuICAnL3JlcGxlbmlzaG1lbnQnLFxuICAnL3JlcGxlbmlzaG1lbnQvKicsXG4gICcvc2FsZXMnLFxuICAnL3NhbGVzLyonLFxuICAnL2ludmVudG9yeScsXG4gICcvaW52ZW50b3J5LyonLFxuICAnL3JlcG9ydHMnLFxuICAnL3JlcG9ydHMvKicsXG4gIFxuICAvLyBBZGQgYW55IG90aGVyIHByb3RlY3RlZCBwYXRocyBoZXJlXG5dXG5cbi8vIERlZmluZSB0aGUgcGF0aHMgdGhhdCBzaG91bGQgYmUgcHVibGljXG5jb25zdCBwdWJsaWNQYXRocyA9IFtcbiAgJy9hdXRoL2xvZ2luJyxcbiAgJy9hdXRoL3NpZ251cCcsXG4gICcvYXV0aC9mb3Jnb3QtcGFzc3dvcmQnXG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybFxuICBjb25zdCB0b2tlbiA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2FjY2Vzc1Rva2VuJyk/LnZhbHVlXG5cbiAgY29uc29sZS5sb2coJ01JRERMRVdBUkU6JywgeyBwYXRobmFtZSwgdG9rZW4gfSk7XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIHBhdGggc2hvdWxkIGJlIHByb3RlY3RlZFxuICBjb25zdCBpc1Byb3RlY3RlZFBhdGggPSBwcm90ZWN0ZWRQYXRocy5zb21lKHBhdGggPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChwYXRoKSlcbiAgY29uc3QgaXNQdWJsaWNQYXRoID0gcHVibGljUGF0aHMuc29tZShwYXRoID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aCkpXG5cbiAgLy8gSWYgaXQncyBhIHByb3RlY3RlZCBwYXRoIGFuZCB0aGVyZSdzIG5vIHRva2VuLCByZWRpcmVjdCB0byBsb2dpblxuICBpZiAoaXNQcm90ZWN0ZWRQYXRoICYmICF0b2tlbikge1xuICAgIGNvbnN0IGxvZ2luVXJsID0gbmV3IFVSTCgnL2F1dGgvbG9naW4nLCByZXF1ZXN0LnVybClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGxvZ2luVXJsKVxuICB9XG5cbiAgLy8gSWYgdXNlciBpcyBsb2dnZWQgaW4gYW5kIHRyaWVzIHRvIGFjY2VzcyBhdXRoIHBhZ2VzLCByZWRpcmVjdCB0byBkYXNoYm9hcmRcbiAgaWYgKGlzUHVibGljUGF0aCAmJiB0b2tlbikge1xuICAgIGNvbnN0IGRhc2hib2FyZFVybCA9IG5ldyBVUkwoJy9kYXNoYm9hcmRzL21haW4nLCByZXF1ZXN0LnVybClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGRhc2hib2FyZFVybClcbiAgfVxuXG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbn1cblxuLy8gQ29uZmlndXJlIHdoaWNoIHBhdGhzIHRoZSBtaWRkbGV3YXJlIHNob3VsZCBydW4gb25cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAvKlxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcbiAgICAgKiAtIGFwaSAoQVBJIHJvdXRlcylcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXG4gICAgICogLSBhc3NldHMgKHB1YmxpYyBhc3NldHMpXG4gICAgICovXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xhc3NldHMpLiopJyxcbiAgXSxcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJvdGVjdGVkUGF0aHMiLCJwdWJsaWNQYXRocyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicGF0aG5hbWUiLCJuZXh0VXJsIiwidG9rZW4iLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiaXNQcm90ZWN0ZWRQYXRoIiwic29tZSIsInBhdGgiLCJzdGFydHNXaXRoIiwiaXNQdWJsaWNQYXRoIiwibG9naW5VcmwiLCJVUkwiLCJ1cmwiLCJyZWRpcmVjdCIsImRhc2hib2FyZFVybCIsIm5leHQiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});